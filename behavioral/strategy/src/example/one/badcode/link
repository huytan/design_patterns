http://wiki.jetbrains.net/intellij/Replace_conditional_logic_with_strategy_pattern